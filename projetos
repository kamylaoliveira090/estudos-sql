-- BANCO DE DADOS PARA UM SISTEMA DE VENDAS

-- Tabela Clientes
CREATE TABLE Clientes (
  id INT AUTO_INCREMENT PRIMARY KEY,
  nome VARCHAR(100),
  email VARCHAR(100)
);

-- Tabela Produtos
CREATE TABLE Produtos (
  id INT AUTO_INCREMENT PRIMARY KEY,
  nome VARCHAR(100),
  preco DECIMAL(10,2)
);

-- Tabela Pedidos
CREATE TABLE Pedidos (
  id INT AUTO_INCREMENT PRIMARY KEY,
  cliente_id INT,
  data_pedido DATE,
  FOREIGN KEY (cliente_id) REFERENCES Clientes(id)
);

-- Tabela ItensPedido
CREATE TABLE ItensPedido (
  id INT AUTO_INCREMENT PRIMARY KEY,
  pedido_id INT,
  produto_id INT,
  quantidade INT,
  FOREIGN KEY (pedido_id) REFERENCES Pedidos(id),
  FOREIGN KEY (produto_id) REFERENCES Produtos(id)
);

-- CONSULTA DE PEDIDOS COMPLETOS
SELECT c.nome, p.data_pedido, pr.nome AS produto, ip.quantidade, pr.preco
FROM Pedidos p
JOIN Clientes c ON p.cliente_id = c.id
JOIN ItensPedido ip ON p.id = ip.pedido_id
JOIN Produtos pr ON ip.produto_id = pr.id;
